<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <title>Overskrifts-analyse (H1–H6) – Seohub.dk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Tjek H1–H6-strukturen på en side: manglende H1, flere H1'ere, spring i niveauer og oversigtsrapport. Indsæt HTML eller forsøg via URL.">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="canonical" href="https://www.seohub.dk/heading-analyzer.html"/>

  <!-- Cookie consent + GA (din eksisterende) -->
  <script src="/assets/consent-analytics.js" defer></script>

  <!-- Din nuværende header & footer (rør ikke andre sider) -->
  <script src="/assets/include-header.js?v=7" defer></script>

  <!-- Tailwind UI -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-b from-neutral-50 to-neutral-100 text-neutral-900">

  <!-- Hero -->
  <section class="py-10 md:py-14">
    <div class="max-w-6xl mx-auto px-4">
      <div class="rounded-2xl p-12 md:p-16 text-white shadow-lg"
           style="background:linear-gradient(135deg,#6366f1 0%,#3b82f6 50%,#06b6d4 100%)">
        <p class="text-xs uppercase tracking-wider text-blue-100/90 mb-2">Værktøj · On-page</p>
        <h1 class="text-4xl md:text-5xl font-extrabold mb-3 leading-tight">Overskrifts-analyse (H1–H6)</h1>
        <p class="text-blue-100 text-lg md:text-xl max-w-3xl">
          Indsæt HTML (sikkert) eller forsøg via URL (kan fejle pga. CORS). Få en oversigt over H1–H6, advarsler og et ryddeligt outline.
        </p>
      </div>
    </div>
  </section>

  <main class="max-w-6xl mx-auto px-4 pb-12 grid grid-cols-1 lg:grid-cols-12 gap-8">
    <!-- Værktøj -->
    <section class="lg:col-span-8 bg-white/70 backdrop-blur rounded-2xl shadow p-6 md:p-8 border border-neutral-100 space-y-6">
      <div class="grid md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-1">URL (eksperimentelt)</label>
          <div class="flex gap-2">
            <input id="urlInput" type="url" placeholder="https://eksempel.dk/side"
                   class="w-full rounded-xl border px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200">
            <button id="btnFetch" class="px-3 py-2 rounded-xl border bg-neutral-50 hover:bg-neutral-100 text-sm">Hent</button>
          </div>
          <p class="text-xs text-neutral-500 mt-1">Bemærk: Mange sites blokerer via CORS. Brug feltet “Indsæt HTML” nedenfor for stabile resultater.</p>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Eller — indsæt HTML (anbefalet)</label>
          <textarea id="htmlInput" rows="6" placeholder="Paste hele sidens HTML her…"
                    class="w-full rounded-xl border px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200"></textarea>
          <div class="mt-2 flex gap-2">
            <button id="btnAnalyze" class="px-3 py-2 rounded-xl border bg-neutral-50 hover:bg-neutral-100 text-sm">Analysér</button>
            <button id="btnClear" class="px-3 py-2 rounded-xl border bg-neutral-50 hover:bg-neutral-100 text-sm">Ryd</button>
          </div>
        </div>
      </div>

      <hr class="my-2">

      <!-- Resultater -->
      <div id="results" class="space-y-6 hidden">
        <div id="summary" class="grid sm:grid-cols-3 gap-3">
          <div class="rounded-xl border bg-white p-4">
            <div class="text-xs uppercase tracking-wide text-neutral-500">Antal H1</div>
            <div id="h1Count" class="text-2xl font-bold mt-1">0</div>
          </div>
          <div class="rounded-xl border bg-white p-4">
            <div class="text-xs uppercase tracking-wide text-neutral-500">Samlet antal H-tags</div>
            <div id="totalCount" class="text-2xl font-bold mt-1">0</div>
          </div>
          <div class="rounded-xl border bg-white p-4">
            <div class="text-xs uppercase tracking-wide text-neutral-500">Unikke niveauer</div>
            <div id="levelsUsed" class="text-2xl font-bold mt-1">–</div>
          </div>
        </div>

        <div id="warnings" class="space-y-2"></div>

        <div>
          <h2 class="text-lg font-semibold mb-2">Outline</h2>
          <div id="outline" class="rounded-xl border bg-white p-4 text-sm"></div>
        </div>

        <div>
          <h2 class="text-lg font-semibold mb-2">Detaljer</h2>
          <div id="tableWrap" class="rounded-xl border bg-white p-2 overflow-auto">
            <table class="min-w-full text-sm">
              <thead>
                <tr class="border-b">
                  <th class="text-left p-2">Niveau</th>
                  <th class="text-left p-2">Tekst</th>
                </tr>
              </thead>
              <tbody id="tableBody"></tbody>
            </table>
          </div>
        </div>

        <div class="flex gap-2">
          <button id="btnCopy" class="px-3 py-2 rounded-xl border bg-neutral-50 hover:bg-neutral-100 text-sm">Kopiér rapport</button>
          <button id="btnDownload" class="px-3 py-2 rounded-xl border bg-neutral-50 hover:bg-neutral-100 text-sm">Download .txt</button>
        </div>
      </div>

      <div id="emptyState" class="text-sm text-neutral-600">
        Indsæt HTML og klik <strong>Analysér</strong> – eller prøv “Hent” fra URL.
      </div>
    </section>

    <!-- Sticky side: tips + CTA -->
    <aside class="lg:col-span-4">
      <div class="lg:sticky lg:top-24 space-y-6">
        <div class="bg-white/70 backdrop-blur rounded-2xl shadow p-6 border border-neutral-100">
          <h2 class="text-sm font-semibold uppercase tracking-wide text-neutral-600 mb-3">Tips</h2>
          <ul class="list-disc pl-5 text-sm space-y-1">
            <li>Én <strong>H1</strong> pr. side (helst).</li>
            <li>Brug <strong>H2 → H3 → H4</strong> uden at springe forbi niveauer.</li>
            <li>Overskriftstekster skal være <strong>beskrivende</strong> og unikke.</li>
          </ul>
        </div>

        <!-- Sponsoreret -->
        <div class="rounded-2xl p-5 md:p-6 text-white shadow-lg"
             style="background:linear-gradient(135deg,#0ea5e9 0%,#6366f1 60%,#8b5cf6 100%)">
          <div class="text-[11px] uppercase tracking-wide mb-2 opacity-90">Sponsoreret anbefaling</div>
          <h3 class="text-lg md:text-xl font-extrabold mb-2">Klar til at gå live?</h3>
          <p class="text-blue-100 mb-3">Få domæne og hosting – nemt at komme i gang.</p>
          <div class="grid grid-cols-1 gap-2">
            <a href="https://go.adt291.com/t/t?a=1676137662&as=1999446175&t=2&tk=1"
               target="_blank" rel="sponsored noopener nofollow"
               class="inline-flex items-center justify-center gap-2 bg-white text-neutral-900 px-4 py-2 rounded-xl font-semibold hover:shadow-lg transition">
              Simply.com →
            </a>
            <a href="https://go.adt256.com/t/t?a=1715455208&as=1999446175&t=2&tk=1"
               target="_blank" rel="sponsored noopener nofollow"
               class="inline-flex items-center justify-center gap-2 bg-white text-neutral-900 px-4 py-2 rounded-xl font-semibold hover:shadow-lg transition">
              DanDomain →
            </a>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <!-- Footer (din eksisterende) -->
  <script src="/assets/include-footer.js?v=2" defer></script>

  <script>
  // ---------- Logic ----------
  const $url = document.getElementById('urlInput');
  const $btnFetch = document.getElementById('btnFetch');
  const $html = document.getElementById('htmlInput');
  const $btnAnalyze = document.getElementById('btnAnalyze');
  const $btnClear = document.getElementById('btnClear');

  const $results = document.getElementById('results');
  const $empty = document.getElementById('emptyState');
  const $h1Count = document.getElementById('h1Count');
  const $totalCount = document.getElementById('totalCount');
  const $levelsUsed = document.getElementById('levelsUsed');
  const $warnings = document.getElementById('warnings');
  const $outline = document.getElementById('outline');
  const $tbody = document.getElementById('tableBody');
  const $btnCopy = document.getElementById('btnCopy');
  const $btnDownload = document.getElementById('btnDownload');

  function parseHeadings(html) {
    const doc = new DOMParser().parseFromString(html, 'text/html');
    const nodes = Array.from(doc.querySelectorAll('h1, h2, h3, h4, h5, h6'));
    const items = nodes.map(n => ({
      level: Number(n.tagName.substring(1)),
      text: (n.textContent || "").trim().replace(/\s+/g, " ")
    }));
    return items;
  }

  function render(items) {
    if (!items || !items.length) {
      $results.classList.add('hidden');
      $empty.classList.remove('hidden');
      return;
    }
    $results.classList.remove('hidden');
    $empty.classList.add('hidden');

    const h1s = items.filter(i => i.level === 1).length;
    const total = items.length;
    const levels = Array.from(new Set(items.map(i => i.level))).sort((a,b)=>a-b);

    const warns = [];
    if (h1s === 0) warns.push('Ingen H1 fundet på siden.');
    if (h1s > 1)  warns.push(\`Flere H1 (=\${h1s}). Overvej kun én.\`);
    for (let i=1;i<items.length;i++) {
      const prev = items[i-1].level, cur = items[i].level;
      if (cur - prev > 1) { warns.push(\`Spring i niveau fra H\${prev} til H\${cur} ved: "\${items[i].text.slice(0,80)}…"\`); break; }
    }

    $h1Count.textContent = String(h1s);
    $totalCount.textContent = String(total);
    $levelsUsed.textContent = levels.join(", ");

    $warnings.innerHTML = warns.length
      ? warns.map(w => \`<div class="text-sm px-3 py-2 rounded-xl bg-amber-50 border border-amber-200">\${w}</div>\`).join("")
      : \`<div class="text-sm px-3 py-2 rounded-xl bg-green-50 border border-green-200">Ingen åbenlyse problemer fundet.</div>\`;

    let indent = 0, last = 1;
    const lines = [];
    items.forEach(it => {
      if (it.level > last) indent += (it.level - last);
      else if (it.level < last) indent -= (last - it.level);
      last = it.level;
      const pad = "&nbsp;".repeat(Math.max(0, indent) * 2);
      lines.push(\`<div><span class="text-neutral-500">H\${it.level}</span> \${pad}<span>\${escapeHtml(it.text)}</span></div>\`);
    });
    $outline.innerHTML = lines.join("");

    $tbody.innerHTML = items.map(it =>
      \`<tr class="border-b">
         <td class="p-2 font-mono text-xs">H\${it.level}</td>
         <td class="p-2">\${escapeHtml(it.text)}</td>
       </tr>\`
    ).join("");

    const plain =
\`Overskrifts-analyse
===================
H1-antal: \${h1s}
Samlet antal H-tags: \${total}
Niveauer: \${levels.join(", ")}

Advarsler:
\${warns.length ? warns.map(w=>" - "+w).join("\\n") : " - (ingen)"}

Outline:
\${items.map(it => "  ".repeat(it.level-1) + "H"+it.level+": "+it.text).join("\\n")}
\`;
    $btnCopy.onclick = async () => {
      try { await navigator.clipboard.writeText(plain); $btnCopy.textContent="Kopieret!"; setTimeout(()=>{$btnCopy.textContent="Kopiér rapport";},1200); }
      catch(e){ alert("Kunne ikke kopiere – markér og kopier manuelt."); }
    };
    $btnDownload.onclick = () => {
      const blob = new Blob([plain], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url; a.download = "heading-report.txt"; a.click();
      URL.revokeObjectURL(url);
    };
  }

  function escapeHtml(s) {
    return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }

  document.getElementById('btnAnalyze').addEventListener('click', () => {
    const src = $html.value.trim();
    if (!src) { alert("Indsæt HTML først."); return; }
    const items = parseHeadings(src);
    render(items);
  });
  document.getElementById('btnClear').addEventListener('click', () => {
    $html.value = ""; render([]);
  });
  document.getElementById('btnFetch').addEventListener('click', async () => {
    const u = $url.value.trim();
    if (!u){ alert("Indtast en URL."); return; }
    try {
      // Kan fejle pga. CORS på fremmede domæner:
      const res = await fetch(u, { mode: "cors" });
      if (!res.ok) throw new Error("Kunne ikke hente siden.");
      const text = await res.text();
      const items = parseHeadings(text);
      $html.value = text;
      render(items);
    } catch(e) {
      alert("Kunne ikke hente via URL (CORS). Kopiér sidens HTML og indsæt i tekstfeltet i stedet.");
    }
  });
  </script>

  <!-- Footer include (din eksisterende) -->
  <script src="/assets/include-footer.js?v=2" defer></script>
</body>
</html>
